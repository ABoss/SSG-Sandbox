<!DOCTYPE html>
<html lang="en-US">
  <head>

    {% include "partials/meta.njk" %}
    {% include "partials/meta.njk" %}
    {% include "partials/compatibility.njk" %}

<!--
  ICON
-->
    {# <!-- third-generation iPad with high-resolution Retina display: -->
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/images/favicon144.png">
    <!-- iPhone with high-resolution Retina display: -->
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="/images/favicon114.png">
    <!-- first- and second-generation iPad: -->
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="/images/favicon72.png">
    <!-- non-Retina iPhone, iPod Touch, and Android 2.1+ devices: -->
    <link rel="apple-touch-icon-precomposed" href="/images/favicon57.png"> #}
    <!-- basic favicon -->
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">

<!--
  THEME
  Set initial theme based on system or browser light/dark preference (with fallback)
-->
    <script>
      // If `prefers-color-scheme` is not supported, fall back to light mode.
      // In this case, theme-light.css will be downloaded with `highest` priority.
      if (window.matchMedia('(prefers-color-scheme: dark)').media === 'not all') {
        document.documentElement.style.display = 'none';
        document.head.insertAdjacentHTML(
            'beforeend',
            '<link href="/styles/theme-light.css" rel="stylesheet" onload="document.documentElement.style.display = \'\'">'
        );
      }
    </script>
    <!--
      If `prefers-color-scheme` is supported, load matching theme with `highest` priority.
    -->
    <link href="/styles/theme-dark.css" rel="stylesheet" media="(prefers-color-scheme: dark)">
    <link href="/styles/theme-light.css" rel="stylesheet" media="(prefers-color-scheme: no-preference), (prefers-color-scheme: light)">
<!--
  CSS
-->
    <link href="{{ "/styles/site.css" | url }}" rel="stylesheet" type="text/css">

    {#- if `page_style` data is passed, include that CSS partial here -#}
  {%- if page_style %}
    <!-- page-specific styles -->
    <style>
{% include "css/page/" + page_style %}
    </style>
  {%- endif %}
<!--
  JAVASCRIPT
-->
    <!-- load critical js -->
    <script src="/scripts/site.js" type="text/javascript"></script>
    <!-- defer loading non-critical js -->
    <script defer src="/scripts/site-defer.js" type="text/javascript"></script>
    <!-- inline page-specific js is located after <body> -->
  </head>
<!--
  PAGE BODY
-->
  <body>

    {{ content | safe }}

    {% include "partials/jsSrc.njk" %}

  </body>

<!--
  JAVASCRIPT (inline, page-specific)
-->
    {#- if `page_script` data is passed, include that js partial here -#}
  {%- if page_script %}
    <!-- page-specific js -->
    <script type="text/javascript">
{% include "js/page/" + page_script %}
    </script>
  {%- endif %}
</html>
